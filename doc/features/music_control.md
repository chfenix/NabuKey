# 音乐播放控制

> **状态**: 📋 规划中 | **优先级**: ⭐⭐⭐ 中 | **复杂度**: 中

## 概述

通过语音命令控制音乐播放，支持控制本地音乐或 Home Assistant 上的媒体设备。

## 系统架构

```
用户语音 ──▶ 唤醒词检测 ──▶ STT ──▶ 意图识别 ──▶ 音乐控制
                                                    │
                              ┌─────────────────────┴─────────────────────┐
                              ▼                                           ▼
                        本地媒体播放器                              HA 媒体控制
                     (MediaSession API)                        (ESPHome 协议)
```

## 功能需求

- 支持 "播放/暂停"、"上一首/下一首"、"音量调节"
- 可选择控制本地播放器或 HA 实体
- 可视化播放状态

## 实现任务

- [ ] 确定音乐控制范围（本地/HA/第三方）
- [ ] 实现 MediaSession 控制（本地）
- [ ] 扩展 ESPHome 协议支持媒体控制
- [ ] 创建音乐播放 UI（可选）
- [ ] 实现语音命令解析

## 文件结构

```
app/src/main/java/com/nabukey/
├── media/
│   ├── MediaController.kt       # 媒体控制器
│   └── MusicPlayerUI.kt         # 音乐播放界面
```
